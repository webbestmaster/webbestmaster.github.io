(()=>{"use strict";(()=>{const e="",n="<br/>";function t(n){return n.trim()!==e}function i(e){return e.trim().replace(/\s+/g," ")}function o(e){if(0===e.length)return!0;const[n]=e;for(const t of e)if(t!==n)return!1;return!0}function r(n,t,i){const o=t.indexOf(n);if(-1===o)return null;const l=o+i,c=l in t?t[l]:null;return c?c.trimmedLine===e?r(n,t,i+(i>=0?1:-1)):c:null}function l(e,n,t){const{selector:i}=e,o=r(e,n,t);return!o||o.selector!==i}const c=["# ","## ","### ","#### ","##### ","###### "],s=["> "],a=["---","***","___"],u=["|"],f=["```"],p=["+ ","- ","* "],d=[{selector:"0. ",regExpSearchSelector:/^\d+\.\s/,olAttributeType:"1"},{selector:"I. ",regExpSearchSelector:/^[CDILMVX]+\.\s/,olAttributeType:"I"},{selector:"i. ",regExpSearchSelector:/^[cdilmvx]+\.\s/,olAttributeType:"i"},{selector:"A. ",regExpSearchSelector:/^[A-Z]+\.\s/,olAttributeType:"A"},{selector:"a. ",regExpSearchSelector:/^[a-z]+\.\s/,olAttributeType:"a"}],h=[...c,...p,...u,...f,...s].sort(((e,n)=>n.length-e.length)),m=[{selector:"***",openTag:"<b><i>",closeTag:"</i></b>",equal:/\*+/},{selector:"**",openTag:"<b>",closeTag:"</b>",equal:/\*+/},{selector:"__",openTag:"<u>",closeTag:"</u>",equal:/_+/},{selector:"_",openTag:"<i>",closeTag:"</i>",equal:/_+/},{selector:"*",openTag:"<i>",closeTag:"</i>",equal:/\*+/},{selector:"~~",openTag:"<strike>",closeTag:"</strike>",equal:/~+/},{selector:"~",openTag:"<sub>",closeTag:"</sub>",equal:/~+/},{selector:"^",openTag:"<sup>",closeTag:"</sup>",equal:/\^+/},{selector:"`",openTag:'<code data-type="inline">',closeTag:"</code>",equal:/`+/}],g="super",b=/\S\[\^[^\]]+?]|\S\^\[[^\]]+?]/g;function L(e){return/^\[\^[^\]]+]:/.test(e)}function x(e,n){return n.find((n=>n.id===e))}function k(e){return e.slice(3,-1).trim()}function $(e){return k(e).toLowerCase().replace(/\W/g," ").trim().replace(/\s+/g,"-")}function S(e){const n=$(e),t=k(e);return 1===e.indexOf("[^")?{id:n,descriptionLineData:null,inlineLineContent:t,type:g}:{id:n,descriptionLineData:null,inlineLineContent:t,type:"inline"}}const T=/<(\w+)[^>]*>[\S\s]*?<\/\1>/,y=/<\w+[^>]*?\s*\/>/;function C(e,n){return Boolean(e)&&Reflect.apply(Object.prototype.hasOwnProperty,e,[n])}function v(e){return"string"==typeof e&&e.trim().length>0}function w(e){return e.includes("@")}const _={useLineBreak:!1,wrapperClassName:"md-pro",parseLink:!0,codeHighlight:(e,n)=>n,useWrapper:!0},E="mailto:";function D(e,n){const[t,i]=e,[o,r]=n;return!(i<o||r<t)}function q(e,n){for(const t of n)if(D(e,t))return!0;return!1}function O(e,n){const t=[],i=e.match(n);if(!i)return[];let o=0;for(const n of i){const i=e.indexOf(n,o),r=i+n.length-1;o=r,t.push([i,r])}return t}const j=/(<\w+[\S\s]*?>)|(<\/\w+?>)|(<\w+[\S\s]*?\/>)/g;function A(e){return O(e,j)}const H=/(<a\s*?>[\S\s]*?<\/a>)|(<a\s[\S\s]*?>[\S\s]*?<\/a>)|(<a\s+[\S\s]*?\/>)/g,I=/(\w+:\/\/[\w.]+\.\w+[\w+/]*)/gi,M=/([\w.-]+@[\w.]+\.\w+[\w+/]*)/gi;function B(e,n,t){const i=function(e){return O(e,H)}(e),o=A(e);return e.replace(n,((e,n,r,l)=>{const c=[r,r];return q(c,o)||q(c,i)?e:`<a href="${t}${e}">${e}</a>`}))}function R(e,n){const{selector:t,openTag:i,closeTag:o}=n,r=t.length;if(!e.includes(t))return e;const l=A(e);let c=function(e,n){const{selector:t,equal:i}=n,o=[],r=t.length;if(0===r)return o;let l=e.indexOf(t,0);for(;-1!==l;){const n=e.slice(l).match(i),[c]=n,s=c.length;s===r&&o.push(l),l=e.indexOf(t,l+s)}return o.length%2==1?o.slice(0,-1):o}(e,n);c=c.filter((e=>{for(const n of l)if(D(n,[e,e+r-1]))return!1;return!0}));const s=c.length;if(0===s)return e;let a=e.slice(0,c[0]);for(let n=1;n<=s;n+=1){const t=c[n],l=e.slice(c[n-1]+r,t);a+=n%2==1?i+l+o:l}return a}const N=/\s*?\\$/;function W(e){return e.replace(N,"<br/>")}function F(e,n){return n||N.test(e)}function z(e,n,t,i){const o=v(i)?' title="'+i+'"':"";return`<img loading="lazy" src="${t}"${v(n)?' alt="'+n+'"':""}${o}/>`}const P=/!\[([\S\s]*?)]\((\S+?)(?:\s+"([\S\s]+?)")?\)/g,U=/!\[([\S\s]*?)]\[([\S\s]+?)]/g,V=/\[x]/gi,X=/\[\s]/g,Y=/\[([\S\s]*?)]\((\S+?)(?:\s+"([\S\s]+?)")?(?:\s+"([\S\s]+?)")?\)/g,Q=/\[([\S\s]*?)]\((\S+?)(?:\s+"([\S\s]+?)")?\)/g,Z=/\[([\S\s]*?)]\[([\S\s]+?)]/g;function G(e,n,t,i,o){const r=v(i)?' title="'+i+'"':"",l=v(o)?"?subject="+o:"",c=n.length>0?n:t;return w(e)?`<a href="mailto:${t}${l}"${r}>${c}</a>`:e}function J(e,n,t,i){return`<a href="${t}"${v(i)?' title="'+i+'"':""}>${n.length>0?n:t}</a>`}function K(e){return w(e)?E:""}function ee(e,n){const{config:t}=n,{parseLink:i}=t;let o=function(e,n){return e.replace(b,(e=>{const[t]=e,{footnoteList:i}=n,o=$(e),r=x(o,i);return`${t}<a href="#${o}"><sup>[${i.indexOf(r)+1}]</sup></a>`}))}(e,n);return o=function(e,n){return e.replace(P,z).replace(U,((e,t,i)=>function(e,n,t,i){const o=v(n)?' alt="'+n+'"':"",{variable:r}=i;return C(r,t)?`<img loading="lazy" src="${r[t].value}"${o}/>`:`<img loading="lazy" src="${t}"${o}/>`}(0,t,i,n)))}(o,n),o=function(e){return e.replace(Y,G)}(o),i&&(o=function(e){return B(e,M,E)}(o)),o=function(e){return e.replace(Q,J)}(o),i&&(o=function(e){return B(e,I,"")}(o)),o=function(e,n){return e.replace(Z,((e,t,i)=>function(e,n,t,i){const{variable:o}=i;if(C(o,t)){const e=o[t].value,i=n.length>0?n:e;return`<a href="${K(e)}${e}">${i}</a>`}const r=n.length>0?n:t;return`<a href="${K(t)}${t}">${r}</a>`}(0,t,i,n)))}(o,n),o=function(e){return e.replace(V,'<input type="checkbox" checked="checked" disabled="disabled"/>').replace(X,'<input type="checkbox" disabled="disabled"/>')}(o),function(e){let n=e;for(const e of m)n=R(n,e);return n}(o)}function ne(n){return n.replace(/[\s:|-]/g,"")===e}function te(e){const n=e.trim(),[t]=n,i=n[n.length-1];return t===i&&":"===t?"center":":"===i?"right":"left"}function ie(n,i,o,r,l){return i.map((i=>`<tr>${function(n,i,o,r,l){const{selector:c}=n;return i.split(c).filter(t).map(((e,n)=>{const t=o[n]||"left";return`<${r} align="${t}">${function(e,n){return ee(e,n).trim()}(e,l)}</${r}>`})).join(e)}(n,i,o,r,l)}</tr>`)).join(e)}function oe(i,o){return i.map(((r,h)=>function(i,o,r,h){const{selector:m,childList:g,lineContent:b,trimmedLine:x,additionalLineList:k,config:$}=i,{codeHighlight:S}=$,C=function(t){const{additionalLineList:i,config:o}=t,{useLineBreak:r}=o;if(0===i.length)return e;const l=F(t.lineContent,r)?n:" ",c=i.length,s=c-1,a=Array.from({length:c}).fill("");for(let t=0;t<c;t+=1){const o=i[t];if(F(o,r)){const i=o.replace(N,e);a[t]=t===s?i:i+n}else a[t]=t===s?o:o+" "}return l+a.join(e)}(i),v=oe(g,h);let w=b.replace(N,e)+C;if(w=ee(w,h),w+=v,L(b))return"";if(function(e){return a.includes(e.selector)}(i))return"<hr/>";if(function(e){return u.includes(e.selector)}(i))return function(e,n){const{selector:i,additionalLineList:o,line:r}=e,l=[r,...o],c=l.find(ne);if(!c)return`<table><tbody>${ie(e,l,[],"td",n)}</tbody></table>`;const s=l.indexOf(c),a=l.slice(0,s),u=l.slice(s+1),f=function(e,n){return n.split(e).filter(t).map(te)}(i,c);return`<table><thead>${ie(e,a,f,"th",n)}</thead><tbody>${ie(e,u,f,"td",n)}</tbody></table>`}(i,h);if(function(e){return f.includes(e.selector)}(i)){const e=S(b,k.join("\n"));return b?`<code data-lang="${b}">${e}</code>`:`<code>${e}</code>`}if(b===e&&0===g.length)return e;if(function(e){return c.includes(e.selector)}(i)){const e=m.length-1;return`<h${e}>${w}</h${e}>`}if(function(e){return s.includes(e.selector)}(i))return`<blockquote>${w}</blockquote>`;if(function(e){return p.includes(e.selector)}(i))return`${l(i,r,-1)?"<ul>":""}<li>${w}</li>${l(i,r,1)?"</ul>":""}`;if(function(e){for(const n of d)if(n.selector===e.selector)return!0;return!1}(i)){const e=l(i,r,-1),n=l(i,r,1);return`${e?`<ol type="${function(e){for(const n of d){const{selector:t,olAttributeType:i}=n;if(e===t)return i}return"1"}(i.selector)}" start="${function(e){const n=e.indexOf(".");return e.slice(0,n)}(x)}">`:""}<li>${w}</li>${n?"</ol>":""}`}return b===e||function(e){const{trimmedLine:n}=e;return 0===n.search(T)||0===n.search(y)}(i)||function(n){return n.replace(P,"").trim()===e}(b)?w:`<p>${w}</p>`}(r,0,i,o))).map(W).join(e)}const re=function n(t,r=_){const l={..._,...r},c={..._,...r,useWrapper:!1},s={lineIndex:-1,spaceCount:-1,selector:e,line:e,trimmedLine:"",lineContent:"",childList:[],additionalLineList:[],config:l},p=[s],m=[s],k={tableLineData:null,codeLineData:null,config:l,footnoteList:[],variable:{}};t.split("\n").forEach(((n,t,r)=>{!function(n,t,r,l,c,s){const p=n.trim(),m=p===e,k=m?c[c.length-1].spaceCount:n.search(/\S/),$=Math.max(0,k),T={selector:e,lineContent:e},{selector:y,lineContent:C}=m?T:function(n){for(const t of h)if(n.startsWith(t))return{selector:t,lineContent:i(n.replace(t,e))};for(const t of a)if(n.startsWith(t)&&o(n))return{selector:t,lineContent:e};for(const t of d){const{selector:o,regExpSearchSelector:r}=t;if(0===n.search(r))return{selector:o,lineContent:i(n.replace(r,e))}}return{selector:e,lineContent:i(n)}}(p),v={lineIndex:t,spaceCount:$,selector:y,line:m?e:n,trimmedLine:p,lineContent:C,childList:[],additionalLineList:[],config:s.config};if(f.includes(y)){if(s.codeLineData&&C===e)return s.codeLineData=null,!0;s.codeLineData=v}const{codeLineData:w}=s;if(w&&w!==v)return w.additionalLineList.push(v.line),!0;if(function(e,n){for(const t of e){const{id:e}=t,i=n.find((n=>n.id===e));i?i.descriptionLineData||(i.descriptionLineData=t.descriptionLineData):n.push(t)}}(function(e){const n=e.match(b);return n?n.map(S):[]}(C),s.footnoteList),u.includes(y)){if(s.tableLineData)return s.tableLineData.additionalLineList.push(v.line),!0;s.tableLineData=v}else s.tableLineData=null;const _=function(e){const n=e.match(/\[([^^][\S\s]+?)]:\s+?\S/);return n?{key:n[1],value:e.slice(e.indexOf("]:")+3).trim()}:null}(C);if(v.selector===e&&C.length>0){const e=c[c.length-1],n=u.includes(e.selector);if(_&&(s.variable[_.key]=_),e&&e.lineContent.length>0&&!n&&!_)return e.additionalLineList.push(C),!0}const E=function(e,n){for(let t=n.length-1;t>=0;t-=1){const i=n[t];if(i.spaceCount<e.spaceCount)return i}return null}(v,c);E&&(_||(E.childList.push(v),c.push(v),L(C)&&function(e,n){const{lineContent:t}=e,i=t.match(/\[\^[^\]]+?]:/);if(!i)return;const[o]=i,r=o.slice(2,-2).trim(),l=x(r,n);l?l.descriptionLineData=e:n.push({id:r,type:g,inlineLineContent:e.lineContent,descriptionLineData:e})}(v,s.footnoteList)))}(n,t,0,0,m,k)}));const{wrapperClassName:$}=l,{wrapperClassName:T}=_,y=oe(p,k),C=k.footnoteList.map((e=>{const{id:t}=e;return`<li id="${t}">${n(function(e){const{inlineLineContent:n,descriptionLineData:t}=e;if(t){const{lineContent:e,additionalLineList:n}=t,i=e.indexOf("]:")+2;return e.slice(i)+"\n"+n.join("\n")}return n}(e),c)}</li>`})),v=[y,0===C.length?"":["<hr/>",'<ol type="1">',...C,"</ol>"].join("")].join("");return!1===l.useWrapper?v:`<div class="${$===T?T:`${T} ${$}`}">${v}</div>`},le=[];function ce(e){const n=le.find((n=>n.node===e));if(n)return n;const{scrollHeight:t,clientHeight:i}=e,o={scrollHeight:t,clientHeight:i,maxScrollTop:t-i,node:e};return le.push(o),o}function se(e){le.splice(0),e.forEach(ce)}function ae(e,n){const t=ce(e),i=ce(n),o=t.node.scrollTop/t.maxScrollTop*i.maxScrollTop;Math.abs(o-i.node.scrollTop)<1||n.scrollTo(0,o)}const ue=document.querySelector(".js-input"),fe=document.querySelector(".js-output"),pe=document.querySelector(".js-output-debug"),de=document.querySelector(".js-use-line-break"),he=document.querySelector(".js-parse-link");ue instanceof HTMLTextAreaElement&&fe instanceof HTMLDivElement&&pe instanceof HTMLPreElement&&de instanceof HTMLInputElement&&he instanceof HTMLInputElement&&(ue.textContent='## Welcome\n\nMarkdown pro - easy to use!\n\n<p>Use any html tags</p>\n<p>Ever\nMulti\nLine</p>\n\nUse option `useLineBreak` to\nbreak\nline\neverywhere.\n\nOr use `\\` at the end of line \\\nto break it.\n\n---\nTo make line use `---`, `***` or `___`.\n***\n\n\n### Emphasis\n\n**This is bold text**\n\n__This is underline text__\n\n_This is italic text_\n\n*This is italic text __too__*\n\n***This is bold and italic text***\n\n~~This is strikethrough text~~\n\n*__**~~Combine styles!~~**__*\n\n\n### Subscript/Superscript\n\n- 25^th^\n- C~2~H~5~OH\n\n\n### Images\n\n![](https://placekitten.com/100/100)\n![Cat](https://placekitten.com/110/110)\n![One more cat](https://placekitten.com/120/120 "The one more cat")\n\nAlso, use image ![](https://placekitten.com/100/25) inline.\n\n\n### Checkboxes\n\n- [X] Checked checkbox\n- [x] Checked checkbox too\n- [ ] Unchecked checkbox\n\n[x] And one more checkbox\n\n\n### Links\n\nYou can use like this [link](http://example.com),\nlike this [](http://example.com "go to site"),\nlike this [go to site](http://example.com "go to site again"),\nlike this [](http://example.com)\nor http://like.this even (last method is configurable).\n\n\n### Emails\n\nYou can use Email this [send a email](my-email@example.com),\nlike this [](my-email@example.com "send a email"),\nlike this [send a email](my-email@example.com "send a email"),\nlike this [send a email with subject](my-email@example.com "send a email" "Subject of Email"),\nlike this [](my-email@example.com)\nor my-email@example.com even (last method is configurable).\n\n\n### Unordered list\n\n+ Create an unordered list by starting a line with `+`, `-` or `*`\n+ Sub-lists are made by indenting space(s):\n    + Lorem ipsum dolor\n    + Alias animi autem beatae\n\n\n### Ordered lists\n\n5. Create a Numeric list\n1. by starting a line with\n2. any number(s) with a dot, for example: `1.`\n\nB. Create a Big Alphabet list\nO. by starting a line with\nP. any Big Letter(s) with a dot, for example: `A.`\nQ. PS: avoid Roman number - I, V, X, L, C, D, M\n\nf. The same rule\no. for Small Alphabet list\nq. PS: avoid Roman number - i, v, x, l, c, d, m\n\nI. Create a Big Roman Number list\nII. by starting a line with\nV. any Big Roman Number(s) with a dot, for example: `I.`\n\nii. The same rule\nv. for Small Roman Number list\n\n\n### Footnote\n\nFootnote 1 link[^first].\n\nFootnote 2 link[^second].\n\nFootnote 1 link[^first] and 2 link[^second].\n\nInline footnote^[Text of inline footnote] definition.\n\nDuplicated footnote reference[^second].\n\n[^first]: Footnote **can have markdown**\nand\n_multiple_\nlines.\n\n[^second]: Footnote text.\n\n\n### Blockquote\n\n> One Markdown, One Specification, One Blockquote\n\n\n### Table\n\nTable with different cell aligns\n| Left     | Center   | Right         | Default (left)          |\n| :------- | :------: | ------------: | ----------------------- |\n| [ ] beep | _123_    | abc^[fn text] | `:---` - left           |\n| [X] boop | `let a`  | link[^first]  | `:--:` - center         |\n| [ ] foo  | **bold** | 123           | `---:` - right          |\n| [x] bar  | H~2~0    | 456           | `----` - default (left) |\n\n\n### Code\n\n```bash\n$ npm i markdown-pro\n$ sudo be happy\n```\n\n\n### Variables\n\n[image-variable]: https://placekitten.com/100/100\n[url variable]: http://example.com\n[email variable]: email@example.com\n\n![][image-variable]\n![cat][image-variable]\n\n[][url variable]\n[to site][url variable]\n[send email][email variable]\n',function(e,n,t,i,o){function r(){se([e,n]),ae(e,n)}function l(){const l=e.value,c=re(l,{useLineBreak:i.checked,parseLink:o.checked});n.innerHTML=c,t.textContent=function(e){let n="",t="";return e.split(/>\s*</).forEach((e=>{/^\/\w/.test(e)&&(t=t.slice("\t".length)),n+=t+"<"+e+">\r\n",/^<?\w[^>]*[^/]$/.test(e)&&(t+="\t")})),n.slice(1,-3)}(c),r()}function c(t){t.currentTarget===e?ae(e,n):ae(n,e)}e.addEventListener("input",l,!1),e.addEventListener("scroll",c,{passive:!0}),n.addEventListener("scroll",c,{passive:!0}),n.addEventListener("scroll",function(e,n,t){let i=null;return function(){const n=this,o=[...arguments];function r(){i=null,Reflect.apply(e,n,o)}const l=t;clearTimeout(i),i=setTimeout(r,200),l&&Reflect.apply(e,n,o)}}((t=>{se([e,n]),c(t)})),{passive:!0}),i.addEventListener("change",l,!1),o.addEventListener("change",l,!1),window.addEventListener("resize",r,!1)}(ue,fe,pe,de,he),ue.dispatchEvent(new Event("input")))})()})();