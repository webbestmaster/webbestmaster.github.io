"use strict";(self.webpackChunktypescript_project=self.webpackChunktypescript_project||[]).push([[702],{7687:(e,t,n)=>{n.d(t,{x:()=>a});var r=n(5893);function i(e){if("number"==typeof e)return[e,e,e,e];if(!Array.isArray(e))return[0,0,0,0];switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return[e[0],e[1],e[2],e[3]];default:return console.error("makeCssArray: too big array"),[e[0],e[1],e[2],e[3]]}}function a(e){const{tagName:t="div",children:n,margin:a,padding:c,width:o,height:l,boxSizing:s,backgroundColor:d,display:u}=e,[m,h,p,f,x,g,y,v]=[...i(a),...i(c)].map((e=>`${e}px`)),j={backgroundColor:d,boxSizing:s,display:u,height:l,marginBottom:p,marginLeft:f,marginRight:h,marginTop:m,paddingBottom:y,paddingLeft:v,paddingRight:g,paddingTop:x,width:o};return(0,r.jsx)(t,{style:j,children:n})}},7037:(e,t,n)=>{n.r(t),n.d(t,{CmsArticleTree:()=>U});var r=n(5893),i=(n(1131),n(7294)),a=n(6170),c=n(7705),o=n(3963),l=n(5623),s=n(4093),d=n(8442),u=n(4184),m=n.n(u),h=n(3124),p=n(8258),f=n(5485),x=n(5378),g=n(2026),y=n(1382),v=n(4308),j=n(1584),b=n(6159),Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},C=function(e,t){var n,r=e.prefixCls,a=e.children,c=e.actions,s=e.extra,d=e.className,u=e.colStyle,p=Z(e,["prefixCls","children","actions","extra","className","colStyle"]),f=(0,i.useContext)(S),x=f.grid,g=f.itemLayout,y=(0,(0,i.useContext)(h.E_).getPrefixCls)("list",r),v=c&&c.length>0&&i.createElement("ul",{className:"".concat(y,"-item-action"),key:"actions"},c.map((function(e,t){return i.createElement("li",{key:"".concat(y,"-item-action-").concat(t)},e,t!==c.length-1&&i.createElement("em",{className:"".concat(y,"-item-action-split")}))}))),C=x?"div":"li",k=i.createElement(C,(0,o.Z)({},p,x?{}:{ref:t},{className:m()("".concat(y,"-item"),(0,l.Z)({},"".concat(y,"-item-no-flex"),!("vertical"===g?s:(i.Children.forEach(a,(function(e){"string"==typeof e&&(n=!0)})),!(n&&i.Children.count(a)>1)))),d)}),"vertical"===g&&s?[i.createElement("div",{className:"".concat(y,"-item-main"),key:"content"},a,v),i.createElement("div",{className:"".concat(y,"-item-extra"),key:"extra"},s)]:[a,v,(0,b.Tm)(s,{key:"extra"})]);return x?i.createElement(j.Z,{ref:t,flex:1,style:u},k):k},k=(0,i.forwardRef)(C);k.Meta=function(e){var t=e.prefixCls,n=e.className,r=e.avatar,a=e.title,c=e.description,l=Z(e,["prefixCls","className","avatar","title","description"]),s=(0,(0,i.useContext)(h.E_).getPrefixCls)("list",t),d=m()("".concat(s,"-item-meta"),n),u=i.createElement("div",{className:"".concat(s,"-item-meta-content")},a&&i.createElement("h4",{className:"".concat(s,"-item-meta-title")},a),c&&i.createElement("div",{className:"".concat(s,"-item-meta-description")},c));return i.createElement("div",(0,o.Z)({},l,{className:d}),r&&i.createElement("div",{className:"".concat(s,"-item-meta-avatar")},r),(a||c)&&u)};const E=k;var S=i.createContext({});function L(e){var t,n=e.pagination,r=void 0!==n&&n,a=e.prefixCls,u=e.bordered,j=void 0!==u&&u,b=e.split,Z=void 0===b||b,C=e.className,k=e.children,E=e.itemLayout,L=e.loadMore,N=e.grid,O=e.dataSource,w=void 0===O?[]:O,I=e.size,T=e.header,A=e.footer,z=e.loading,P=void 0!==z&&z,R=e.rowKey,$=e.renderItem,_=e.locale,M=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),D=r&&"object"===(0,d.Z)(r)?r:{},K=i.useState(D.defaultCurrent||1),Q=(0,s.Z)(K,2),B=Q[0],H=Q[1],q=i.useState(D.defaultPageSize||10),F=(0,s.Z)(q,2),J=F[0],W=F[1],G=i.useContext(h.E_),U=G.getPrefixCls,V=G.renderEmpty,X=G.direction,Y={},ee=function(e){return function(t,n){H(t),W(n),r&&r[e]&&r[e](t,n)}},te=ee("onChange"),ne=ee("onShowSizeChange"),re=U("list",a),ie=P;"boolean"==typeof ie&&(ie={spinning:ie});var ae=ie&&ie.spinning,ce="";switch(I){case"large":ce="lg";break;case"small":ce="sm"}var oe=m()(re,(t={},(0,l.Z)(t,"".concat(re,"-vertical"),"vertical"===E),(0,l.Z)(t,"".concat(re,"-").concat(ce),ce),(0,l.Z)(t,"".concat(re,"-split"),Z),(0,l.Z)(t,"".concat(re,"-bordered"),j),(0,l.Z)(t,"".concat(re,"-loading"),ae),(0,l.Z)(t,"".concat(re,"-grid"),!!N),(0,l.Z)(t,"".concat(re,"-something-after-last-item"),!!(L||r||A)),(0,l.Z)(t,"".concat(re,"-rtl"),"rtl"===X),t),C),le=(0,o.Z)((0,o.Z)((0,o.Z)({},{current:1,total:0}),{total:w.length,current:B,pageSize:J}),r||{}),se=Math.ceil(le.total/le.pageSize);le.current>se&&(le.current=se);var de=r?i.createElement("div",{className:"".concat(re,"-pagination")},i.createElement(g.Z,(0,o.Z)({},le,{onChange:te,onShowSizeChange:ne}))):null,ue=(0,c.Z)(w);r&&w.length>(le.current-1)*le.pageSize&&(ue=(0,c.Z)(w).splice((le.current-1)*le.pageSize,le.pageSize));var me=Object.keys(N||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),he=(0,x.Z)(me),pe=i.useMemo((function(){for(var e=0;e<v.c4.length;e+=1){var t=v.c4[e];if(he[t])return t}}),[he]),fe=i.useMemo((function(){if(N){var e=pe&&N[pe]?N[pe]:N.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null==N?void 0:N.column,pe]),xe=ae&&i.createElement("div",{style:{minHeight:53}});if(ue.length>0){var ge=ue.map((function(e,t){return function(e,t){return $?((n="function"==typeof R?R(e):R?e[R]:e.key)||(n="list-item-".concat(t)),Y[t]=n,$(e,t)):null;var n}(e,t)})),ye=i.Children.map(ge,(function(e,t){return i.createElement("div",{key:Y[t],style:fe},e)}));xe=N?i.createElement(f.Z,{gutter:N.gutter},ye):i.createElement("ul",{className:"".concat(re,"-items")},ge)}else k||ae||(xe=function(e,t){return i.createElement("div",{className:"".concat(e,"-empty-text")},_&&_.emptyText||t("List"))}(re,V||p.Z));var ve=le.position||"bottom",je=i.useMemo((function(){return{grid:N,itemLayout:E}}),[JSON.stringify(N),E]);return i.createElement(S.Provider,{value:je},i.createElement("div",(0,o.Z)({className:oe},M),("top"===ve||"both"===ve)&&de,T&&i.createElement("div",{className:"".concat(re,"-header")},T),i.createElement(y.Z,(0,o.Z)({},ie),xe,k),A&&i.createElement("div",{className:"".concat(re,"-footer")},A),L||("bottom"===ve||"both"===ve)&&de))}S.Consumer,L.Item=E;const N=L;var O=n(3716),w=n(7049),I=n(468),T=n(7254),A=n(9655),z=n(2137),P=n(4154),R=n(6479),$=n(7178),_=n(7687),M=n(1454),D=n(929),K=n(4564);const Q=["articleType","id","isActive","slug","subDocumentIdList","title"];var B=n(3624);const{Text:H}=a.Z;function q(e,t){return e.find((e=>e.id===t))||null}function F(e,t,n){if(0===n)return console.error("[ERROR]: populateChildren: limit exceeded"),[];const i=q(t,e);if(!i)return[];const{subDocumentIdList:a}=i;return a.map((e=>{const i=q(t,e),a=(0,D.j9)(e);if(!i)return{key:e,title:(0,r.jsx)(A.Link,{to:a,children:(0,r.jsxs)(H,{type:"danger",children:["[ERROR]: can NOT find article by id: ",e]})})};const{title:c,slug:o,isActive:l,articleType:s}=i,d=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Link,{to:(0,K._)(o),children:c})," | ",(0,r.jsx)(A.Link,{to:a,children:o})," | ",(0,r.jsxs)(H,{children:[s," ",(0,M.pA)(l)]})]});return{children:F(e,t,n-1),key:e,title:d}}))}const{Title:J,Text:W}=a.Z,{Item:G}=N;function U(){const{execute:e,isInProgress:t}=(0,P.Od)(R.Qy),[n,a]=(0,i.useState)([]);(0,i.useEffect)((()=>{e({pageIndex:0,pageSize:0,query:{},sort:{title:1}},Q).then((e=>a(e.result))).catch((e=>{O.ZP.error("Can not fetch article list.")}))}),[e]);const c=(o=n,{children:F(B.Z,o,10),key:B.Z,title:(0,r.jsx)(A.Link,{to:(0,D.j9)(B.Z),children:B.Z})});var o;const l=function(e){return e.filter((t=>!e.some((e=>e.subDocumentIdList.includes(t.id)))))}(n),s=function(e){return e.filter((t=>{const{subDocumentIdList:n}=t;return n.some((t=>!q(e,t)))}))}(n),d=(0,i.useCallback)(((e,t)=>{const{title:n,slug:i,isActive:a,articleType:c,id:o}=e;return(0,r.jsxs)(G,{children:[(0,r.jsxs)(W,{children:[t+1,". "]}),(0,r.jsx)(A.Link,{to:(0,K._)(i),children:n})," | ",(0,r.jsx)(A.Link,{to:(0,D.j9)(o),children:i})," | ",(0,r.jsxs)(W,{children:[c," ",(0,M.pA)(a)]})]})}),[]),u=(0,i.useCallback)(((e,t)=>{const{title:i,slug:a,isActive:c,articleType:o,id:l,subDocumentIdList:s}=e,d=s.filter((e=>!q(n,e))).join(", ");return(0,r.jsxs)(G,{children:[(0,r.jsxs)(W,{children:[t+1,". "]}),(0,r.jsx)(A.Link,{to:(0,K._)(a),children:i})," | ",(0,r.jsx)(A.Link,{to:(0,D.j9)(l),children:a})," | ",(0,r.jsxs)(W,{children:[o," ",(0,M.pA)(c)]})," | ",(0,r.jsxs)(W,{type:"danger",children:["Ids: ",d]})]})}),[n]);return(0,r.jsxs)(z.Q,{children:[(0,r.jsx)(J,{level:2,children:"Article tree"}),(0,r.jsxs)(w.Z,{orientation:"left",children:["Articles in a tree, total (include non-parents): ",n.length]}),(0,r.jsx)(I.Z,{autoExpandParent:!0,defaultExpandAll:!0,showLine:!0,switcherIcon:(0,r.jsx)(T.Z,{}),treeData:[c]}),(0,r.jsxs)(w.Z,{orientation:"left",children:["Articles without parent, total: ",l.length]}),(0,r.jsx)(_.x,{backgroundColor:"#fff",children:(0,r.jsx)(N,{bordered:!0,dataSource:l,renderItem:d})}),(0,r.jsxs)(w.Z,{orientation:"left",children:["Articles with lost children, total: ",s.length]}),(0,r.jsx)(_.x,{backgroundColor:"#fff",children:(0,r.jsx)(N,{bordered:!0,dataSource:s,renderItem:u})}),(0,r.jsx)($.$,{isShow:t,position:"absolute"})]})}},2137:(e,t,n)=>{n.d(t,{Q:()=>u});var r=n(5893),i=n(7183),a=n(8911),c=n(9250),o=n(9655),l=n(7687),s=n(4057);const{Content:d}=i.Z;function u(e){const{children:t}=e,n=(0,c.TH)();return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(l.x,{padding:16,children:(0,r.jsx)(a.Z,{defaultSelectedKeys:[n.pathname],items:[{key:s.$.articleList.path,label:(0,r.jsx)(o.Link,{to:s.$.articleList.path,children:"List"})},{key:s.$.articleCreate.path,label:(0,r.jsx)(o.Link,{to:s.$.articleCreate.path,children:"Create"})},{key:s.$.articleTree.path,label:(0,r.jsx)(o.Link,{to:s.$.articleTree.path,children:"Tree"})}],mode:"horizontal"})}),(0,r.jsx)(l.x,{padding:16,children:(0,r.jsx)(d,{children:t})})]})}}}]);
//# sourceMappingURL=page-cms-article-tree.aa1faf.chunk.js.map