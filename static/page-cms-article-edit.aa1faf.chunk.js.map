{"version":3,"file":"page-cms-article-edit.aa1faf.chunk.js","mappings":"sRAcA,MAAM,MAACA,GAAS,IAET,SAASC,IACZ,MAAM,UAACC,IAAa,WAGhBC,QAASC,EACTC,aAAcC,EACdC,OAAQC,IACR,QACA,OAGJ,IAAAC,YAAU,KACNL,EAAY,CACRM,UAAW,EACXC,SAAU,EACVC,MAAO,CAACC,GAAIX,GAAa,IACzBY,KAAM,CAACC,MAAO,IAChB,GACH,CAACX,EAAaF,IAEjB,MAAOC,QAASa,EAAeX,aAAcY,IAA6B,QAGxE,MAaIC,GAAoCV,aAAiB,EAAjBA,EAAmBD,OAAO,KAAM,KAE1E,OAAsB,OAAlBW,GAEI,UAAC,IAAO,YACJ,UAAC,IAAQ,CAACC,SAAUb,EAAuB,WACvC,UAACN,EAAK,CAACoB,MAAO,EAAC,8BAAoBlB,MACnC,SAAC,IAAO,CAACmB,OAAQf,EAAyBgB,SAAS,cAEvD,SAAC,IAAQ,CAACH,UAAWb,EAAuB,UACxC,UAACN,EAAK,CAACoB,MAAO,EAAC,0CAAgClB,SAN1C,eAajB,UAAC,IAAO,YACJ,UAACF,EAAK,CAACoB,MAAO,EAAC,8BAAoBlB,MACnC,SAAC,IAAU,CAACqB,QAASL,EAAeM,KAAM,UAAyBC,SA9B3E,SAAwBF,GACpBP,EAAcO,GACTG,MAAMC,IAEH,aAAgB,4BAA4B,IAE/CC,OAAOC,IACJ,WAAc,UAAUA,EAAaC,UAAU,GAE3D,KAsBQ,SAAC,IAAO,CAACT,OAAQJ,EAA2BK,SAAS,YAH3CpB,EAMtB,C","sources":["webpack://typescript-project/./www/page/cms/cms-article/cms-article-edit/cms-article-edit.tsx"],"sourcesContent":["import {useEffect} from 'react';\nimport {Typography, message} from 'antd';\nimport {useParams} from 'react-router-dom';\n\nimport {CmsArticle} from '../cms-article';\nimport {CmsArticleModeEnum} from '../cms-article-const';\nimport {ArticleType} from '../../../../../server/article/article-type';\nimport {getArticleListPagination, postArticleUpdate} from '../../../../service/article/article-api';\nimport {useMakeExecutableState} from '../../../../util/function';\nimport {Spinner} from '../../../../layout/spinner/spinner';\nimport {CmsPage} from '../../layout/cms-page/cms-page';\nimport {PaginationResultType} from '../../../../../server/data-base/data-base-type';\nimport {IsRender} from '../../../../layout/is-render/is-render';\n\nconst {Title} = Typography;\n\nexport function CmsArticleEdit(): JSX.Element {\n    const {articleId} = useParams<'articleId'>();\n\n    const {\n        execute: articleById,\n        isInProgress: isInProgressArticleById,\n        result: articleByIdResult,\n    } = useMakeExecutableState<Parameters<typeof getArticleListPagination>, PaginationResultType<ArticleType>>(\n        getArticleListPagination\n    );\n\n    useEffect(() => {\n        articleById({\n            pageIndex: 0,\n            pageSize: 1,\n            query: {id: articleId || ''},\n            sort: {title: 1},\n        });\n    }, [articleById, articleId]);\n\n    const {execute: updateArticle, isInProgress: isInProgressUpdateArticle} = useMakeExecutableState<\n        Parameters<typeof postArticleUpdate>,\n        ArticleType\n    >(postArticleUpdate);\n\n    function handleOnFinish(article: ArticleType) {\n        updateArticle(article)\n            .then((savedArticle: ArticleType) => {\n                console.log(savedArticle);\n                message.success('Article has been updated!');\n            })\n            .catch((requestError: Error) => {\n                message.error(`ERROR: ${requestError.message}`);\n            });\n    }\n\n    const articleToEdit: ArticleType | null = articleByIdResult?.result[0] || null;\n\n    if (articleToEdit === null) {\n        return (\n            <CmsPage key=\"no-article\">\n                <IsRender isRender={isInProgressArticleById}>\n                    <Title level={2}>Edit an article: {articleId}</Title>\n                    <Spinner isShow={isInProgressArticleById} position=\"fixed\" />\n                </IsRender>\n                <IsRender isRender={!isInProgressArticleById}>\n                    <Title level={2}>Can not found article by id: {articleId}</Title>\n                </IsRender>\n            </CmsPage>\n        );\n    }\n\n    return (\n        <CmsPage key={articleId}>\n            <Title level={2}>Edit an article: {articleId}</Title>\n            <CmsArticle article={articleToEdit} mode={CmsArticleModeEnum.edit} onFinish={handleOnFinish} />\n            <Spinner isShow={isInProgressUpdateArticle} position=\"fixed\" />\n        </CmsPage>\n    );\n}\n"],"names":["Title","CmsArticleEdit","articleId","execute","articleById","isInProgress","isInProgressArticleById","result","articleByIdResult","useEffect","pageIndex","pageSize","query","id","sort","title","updateArticle","isInProgressUpdateArticle","articleToEdit","isRender","level","isShow","position","article","mode","onFinish","then","savedArticle","catch","requestError","message"],"sourceRoot":""}